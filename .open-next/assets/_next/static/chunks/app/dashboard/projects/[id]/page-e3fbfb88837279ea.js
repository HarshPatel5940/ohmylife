(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[618],{6724:function(e,t,s){Promise.resolve().then(s.bind(s,395))},2475:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(3558).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},335:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(3558).Z)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]])},6993:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(3558).Z)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},1250:function(e,t,s){"use strict";var a=s(7797);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},395:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return A}});var a=s(9533),n=s(1229),i=s(1250),r=s(4259),l=s(2238),c=s(3191),o=s(220),d=s(6513),h=s(8149),u=s(8070),x=s(3823),m=s(3558);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let j=(0,m.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),p=(0,m.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var f=s(2374),v=s(5126),g=s(1301);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,m.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var N=s(3103),b=s(6993),w=s(322),k=s(3373);function C(e){let{project:t,onEdit:s,onDelete:n}=e,r=(0,i.useRouter)();return(0,a.jsxs)("div",{className:"flex items-center justify-between border-b pb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(o.z,{variant:"ghost",size:"icon",onClick:()=>r.back(),children:(0,a.jsx)(y,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.name,(0,a.jsx)(g.C,{variant:"active"===t.status?"default":"completed"===t.status?"secondary":"on_hold"===t.status?"outline":"destructive",children:t.status})]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:s,children:[(0,a.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,a.jsxs)(k.h_,{children:[(0,a.jsx)(k.$F,{asChild:!0,children:(0,a.jsx)(o.z,{variant:"ghost",size:"icon",children:(0,a.jsx)(b.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(k.AW,{align:"end",children:(0,a.jsxs)(k.Xi,{onClick:n,className:"text-red-600",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"Delete Project"]})})]})]})]})}function S(e){let{project:t,clientName:s}=e;return(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{children:"Project Overview"})}),(0,a.jsxs)(l.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-1",children:"Description"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:t.description||"No description provided."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-1",children:"Client"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:s})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-1",children:"Start Date"}),(0,a.jsx)("p",{children:t.startDate?new Date(t.startDate).toLocaleDateString():"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-1",children:"End Date"}),(0,a.jsx)("p",{children:t.endDate?new Date(t.endDate).toLocaleDateString():"N/A"})]})]})]})]})}var D=s(4912),z=s(2475),F=s(5477);function P(e){let{tasks:t,people:s,projectId:i,onTasksChange:r}=e,[l,h]=(0,n.useState)("list"),[x,m]=(0,n.useState)(!1),[j,p]=(0,n.useState)(null),[v,y]=(0,n.useState)(""),[b,k]=(0,n.useState)("todo"),[C,S]=(0,n.useState)("medium"),[P,T]=(0,n.useState)("none"),[_,E]=(0,n.useState)(""),Z=e=>{if(e){var t;p(e),y(e.title),k(e.status),S(e.priority),T((null===(t=e.assigneeId)||void 0===t?void 0:t.toString())||"none"),E(e.dueDate||"")}else p(null),y(""),k("todo"),S("medium"),T("none"),E("");m(!0)},I=async e=>{e.preventDefault();try{let e={title:v,status:b,priority:C,assigneeId:"none"===P?null:parseInt(P),dueDate:_||null,projectId:i},t=j?"/api/tasks/".concat(j.id):"/api/tasks";(await fetch(t,{method:j?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&(r(),m(!1))}catch(e){console.error("Failed to save task",e)}},V=async e=>{if(confirm("Delete this task?"))try{(await fetch("/api/tasks/".concat(e),{method:"DELETE"})).ok&&r()}catch(e){console.error("Failed to delete task",e)}},M=e=>{if(!e)return"Unassigned";let t=s.find(t=>t.id===e);return(null==t?void 0:t.name)||"Unknown"},A={todo:t.filter(e=>"todo"===e.status),"in-progress":t.filter(e=>"in-progress"===e.status),done:t.filter(e=>"done"===e.status)};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Project Tasks"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-800 p-1 rounded-lg flex",children:[(0,a.jsx)(o.z,{variant:"list"===l?"secondary":"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>h("list"),children:"List"}),(0,a.jsx)(o.z,{variant:"board"===l?"secondary":"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>h("board"),children:"Board"})]}),(0,a.jsxs)(o.z,{onClick:()=>Z(),children:[(0,a.jsx)(D.Z,{className:"mr-2 h-4 w-4"})," Add Task"]})]})]}),"list"===l?(0,a.jsx)("div",{className:"border rounded-lg",children:(0,a.jsxs)(F.iA,{children:[(0,a.jsx)(F.xD,{children:(0,a.jsxs)(F.SC,{children:[(0,a.jsx)(F.ss,{children:"Title"}),(0,a.jsx)(F.ss,{children:"Status"}),(0,a.jsx)(F.ss,{children:"Priority"}),(0,a.jsx)(F.ss,{children:"Assignee"}),(0,a.jsx)(F.ss,{children:"Due Date"}),(0,a.jsx)(F.ss,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(F.RM,{children:0===t.length?(0,a.jsx)(F.SC,{children:(0,a.jsx)(F.pj,{colSpan:6,className:"text-center text-gray-500",children:"No tasks yet"})}):t.map(e=>(0,a.jsxs)(F.SC,{children:[(0,a.jsx)(F.pj,{className:"font-medium",children:e.title}),(0,a.jsx)(F.pj,{children:(0,a.jsx)(g.C,{variant:"done"===e.status?"default":"secondary",children:e.status})}),(0,a.jsx)(F.pj,{children:(0,a.jsx)(g.C,{variant:"high"===e.priority?"destructive":"outline",children:e.priority})}),(0,a.jsx)(F.pj,{children:M(e.assigneeId)}),(0,a.jsx)(F.pj,{children:e.dueDate?new Date(e.dueDate).toLocaleDateString():"-"}),(0,a.jsxs)(F.pj,{className:"text-right space-x-2",children:[(0,a.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>Z(e),children:(0,a.jsx)(N.Z,{className:"h-4 w-4"})}),(0,a.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>V(e.id),children:(0,a.jsx)(w.Z,{className:"h-4 w-4"})})]})]},e.id))})]})}):(0,a.jsx)("div",{className:"grid grid-cols-3 gap-4",children:Object.entries(A).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h4",{className:"font-medium capitalize flex items-center justify-between",children:[t.replace("-"," "),(0,a.jsx)(g.C,{variant:"outline",children:s.length})]}),(0,a.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,a.jsxs)("div",{className:"p-3 border rounded-lg bg-white dark:bg-gray-800 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>Z(e),children:[(0,a.jsx)("h5",{className:"font-medium mb-2",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsx)(g.C,{variant:"high"===e.priority?"destructive":"outline",className:"text-xs",children:e.priority}),e.dueDate&&(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(z.Z,{className:"h-3 w-3 mr-1"}),new Date(e.dueDate).toLocaleDateString()]})]})]},e.id))})]},t)})}),(0,a.jsx)(f.Vq,{open:x,onOpenChange:m,children:(0,a.jsxs)(f.cZ,{children:[(0,a.jsxs)(f.fK,{children:[(0,a.jsx)(f.$N,{children:j?"Edit Task":"Add New Task"}),(0,a.jsx)(f.Be,{children:j?"Update task details":"Create a new task for this project"})]}),(0,a.jsxs)("form",{onSubmit:I,children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"title",children:"Title *"}),(0,a.jsx)(c.I,{id:"title",value:v,onChange:e=>y(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"status",children:"Status"}),(0,a.jsxs)(u.Ph,{value:b,onValueChange:k,children:[(0,a.jsx)(u.i4,{children:(0,a.jsx)(u.ki,{})}),(0,a.jsxs)(u.Bw,{children:[(0,a.jsx)(u.Ql,{value:"todo",children:"To Do"}),(0,a.jsx)(u.Ql,{value:"in-progress",children:"In Progress"}),(0,a.jsx)(u.Ql,{value:"done",children:"Done"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"priority",children:"Priority"}),(0,a.jsxs)(u.Ph,{value:C,onValueChange:S,children:[(0,a.jsx)(u.i4,{children:(0,a.jsx)(u.ki,{})}),(0,a.jsxs)(u.Bw,{children:[(0,a.jsx)(u.Ql,{value:"low",children:"Low"}),(0,a.jsx)(u.Ql,{value:"medium",children:"Medium"}),(0,a.jsx)(u.Ql,{value:"high",children:"High"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"assignee",children:"Assignee"}),(0,a.jsxs)(u.Ph,{value:P,onValueChange:T,children:[(0,a.jsx)(u.i4,{children:(0,a.jsx)(u.ki,{placeholder:"Select assignee"})}),(0,a.jsxs)(u.Bw,{children:[(0,a.jsx)(u.Ql,{value:"none",children:"Unassigned"}),s.map(e=>(0,a.jsx)(u.Ql,{value:e.id.toString(),children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"dueDate",children:"Due Date"}),(0,a.jsx)(c.I,{id:"dueDate",type:"date",value:_,onChange:e=>E(e.target.value)})]})]}),(0,a.jsxs)(f.cN,{className:"mt-6",children:[(0,a.jsx)(o.z,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),(0,a.jsxs)(o.z,{type:"submit",children:[j?"Update":"Create"," Task"]})]})]})]})})]})}function T(e){let{notes:t,projectId:s,onNotesChange:i}=e,[r,c]=(0,n.useState)(""),d=async()=>{if(r.trim())try{(await fetch("/api/projects/".concat(s,"/notes"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:r})})).ok&&(c(""),i())}catch(e){console.error("Failed to add note",e)}},u=async e=>{if(confirm("Delete this note?"))try{(await fetch("/api/projects/".concat(s,"/notes/").concat(e),{method:"DELETE"})).ok&&i()}catch(e){console.error("Failed to delete note",e)}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(h.g,{placeholder:"Add a note...",value:r,onChange:e=>c(e.target.value),className:"flex-1"}),(0,a.jsxs)(o.z,{onClick:d,children:[(0,a.jsx)(D.Z,{className:"h-4 w-4 mr-2"})," Add"]})]}),(0,a.jsx)("div",{className:"space-y-3",children:0===t.length?(0,a.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No notes yet"}):t.map(e=>(0,a.jsx)(l.Zb,{children:(0,a.jsxs)(l.aY,{className:"pt-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("p",{className:"flex-1 whitespace-pre-wrap",children:e.content}),(0,a.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>u(e.id),children:(0,a.jsx)(w.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:new Date(e.createdAt).toLocaleString()})]})},e.id))})]})}var _=s(335);function E(e){let{teamMembers:t,people:s,projectId:i,onTeamChange:r}=e,[l,c]=(0,n.useState)(!1),[h,m]=(0,n.useState)(""),[j,p]=(0,n.useState)("member"),v=async e=>{if(e.preventDefault(),h)try{(await fetch("/api/projects/".concat(i,"/team"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({personId:parseInt(h),role:j})})).ok&&(c(!1),m(""),p("member"),r())}catch(e){console.error("Failed to add team member",e)}},g=async e=>{if(confirm("Remove this team member?"))try{(await fetch("/api/projects/".concat(i,"/team/").concat(e),{method:"DELETE"})).ok&&r()}catch(e){console.error("Failed to remove team member",e)}},y=e=>{let t=s.find(t=>t.id===e);return(null==t?void 0:t.name)||"Unknown"},N=s.filter(e=>!t.some(t=>t.personId===e.id));return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Team Members"}),(0,a.jsxs)(o.z,{onClick:()=>c(!0),children:[(0,a.jsx)(D.Z,{className:"h-4 w-4 mr-2"})," Add Member"]})]}),(0,a.jsx)("div",{className:"space-y-3",children:0===t.length?(0,a.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No team members yet"}):t.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(x.qE,{children:(0,a.jsx)(x.Q5,{children:(0,a.jsx)(_.Z,{className:"h-6 w-6"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:y(e.personId)}),(0,a.jsx)("p",{className:"text-sm text-gray-500 capitalize",children:e.role})]})]}),(0,a.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>g(e.id),children:(0,a.jsx)(w.Z,{className:"h-4 w-4"})})]},e.id))}),(0,a.jsx)(f.Vq,{open:l,onOpenChange:c,children:(0,a.jsxs)(f.cZ,{children:[(0,a.jsxs)(f.fK,{children:[(0,a.jsx)(f.$N,{children:"Add Team Member"}),(0,a.jsx)(f.Be,{children:"Add a person to this project team"})]}),(0,a.jsxs)("form",{onSubmit:v,children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"person",children:"Person *"}),(0,a.jsxs)(u.Ph,{value:h,onValueChange:m,children:[(0,a.jsx)(u.i4,{children:(0,a.jsx)(u.ki,{placeholder:"Select a person"})}),(0,a.jsx)(u.Bw,{children:N.map(e=>(0,a.jsx)(u.Ql,{value:e.id.toString(),children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"role",children:"Role"}),(0,a.jsxs)(u.Ph,{value:j,onValueChange:p,children:[(0,a.jsx)(u.i4,{children:(0,a.jsx)(u.ki,{})}),(0,a.jsxs)(u.Bw,{children:[(0,a.jsx)(u.Ql,{value:"lead",children:"Lead"}),(0,a.jsx)(u.Ql,{value:"member",children:"Member"}),(0,a.jsx)(u.Ql,{value:"contributor",children:"Contributor"})]})]})]})]}),(0,a.jsxs)(f.cN,{className:"mt-6",children:[(0,a.jsx)(o.z,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),(0,a.jsx)(o.z,{type:"submit",children:"Add Member"})]})]})]})})]})}/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let Z=(0,m.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),I=(0,m.Z)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),V=(0,m.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);function M(e){let{files:t,projectId:s,onFilesChange:i}=e,[r,l]=(0,n.useState)(!1),c=(0,n.useRef)(null),d=async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;l(!0);let n=new FormData;n.append("file",a);try{(await fetch("/api/projects/".concat(s,"/files"),{method:"POST",body:n})).ok&&(i(),c.current&&(c.current.value=""))}catch(e){console.error("Failed to upload file",e)}finally{l(!1)}},h=async e=>{if(confirm("Delete this file?"))try{(await fetch("/api/projects/".concat(s,"/files/").concat(e),{method:"DELETE"})).ok&&i()}catch(e){console.error("Failed to delete file",e)}},u=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB";return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Project Files"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{ref:c,type:"file",onChange:d,className:"hidden",id:"file-upload"}),(0,a.jsxs)(o.z,{onClick:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.click()},disabled:r,children:[(0,a.jsx)(Z,{className:"h-4 w-4 mr-2"}),r?"Uploading...":"Upload File"]})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:0===t.length?(0,a.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No files uploaded yet"}):t.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,a.jsx)(I,{className:"h-5 w-5 text-gray-400"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium truncate",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[u(e.size)," â€¢ ",new Date(e.uploadedAt).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.z,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsx)("a",{href:e.url,download:!0,children:(0,a.jsx)(V,{className:"h-4 w-4"})})}),(0,a.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>h(e.id),children:(0,a.jsx)(w.Z,{className:"h-4 w-4"})})]})]},e.id))})]})}function A(){let e=(0,i.useParams)(),t=(0,i.useRouter)(),s=e.id,[m,g]=(0,n.useState)(null),[y,N]=(0,n.useState)([]),[b,w]=(0,n.useState)([]),[k,D]=(0,n.useState)([]),[z,F]=(0,n.useState)([]),[_,Z]=(0,n.useState)([]),[I,V]=(0,n.useState)([]),[A,U]=(0,n.useState)(!0),[O,Q]=(0,n.useState)("overview"),[L,q]=(0,n.useState)(!1),[R,B]=(0,n.useState)(""),[H,K]=(0,n.useState)(""),[J,W]=(0,n.useState)(""),[Y,$]=(0,n.useState)(""),[X,G]=(0,n.useState)(""),[ee,et]=(0,n.useState)(""),[es,ea]=(0,n.useState)(!1),[en,ei]=(0,n.useState)([]),[er,el]=(0,n.useState)(""),[ec,eo]=(0,n.useState)(null),ed=(0,n.useRef)(null);(0,n.useEffect)(()=>{s&&(eh(),eu(),ex(),em(),ej(),ep(),ef())},[s]),(0,n.useEffect)(()=>{if("chat"===O&&s&&!ec){fetch("/api/projects/".concat(s,"/chat/messages")).then(e=>e.json()).then(e=>ei(e)).catch(e=>console.error("Failed to fetch chat history",e));let e="https:"===window.location.protocol?"wss":"ws",t=new WebSocket("".concat(e,"://").concat(window.location.host,"/api/projects/").concat(s,"/chat"));t.onopen=()=>console.log("Connected to chat"),t.onmessage=e=>{let t=JSON.parse(e.data);ei(e=>[...e,t])},t.onclose=()=>{console.log("Disconnected from chat"),eo(null)},eo(t)}return()=>{ec&&ec.close()}},[O,s]),(0,n.useEffect)(()=>{var e;null===(e=ed.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[en]);let eh=async()=>{try{let e=await fetch("/api/projects/".concat(s));if(e.ok){let t=await e.json();g(t)}}catch(e){console.error("Failed to fetch project",e)}finally{U(!1)}},eu=async()=>{try{let e=await fetch("/api/tasks?projectId=".concat(s));if(e.ok){let t=await e.json();N(t)}}catch(e){console.error("Failed to fetch tasks",e)}},ex=async()=>{try{let e=await fetch("/api/people");if(e.ok){let t=await e.json();w(t)}}catch(e){console.error("Failed to fetch people",e)}},em=async()=>{try{let e=await fetch("/api/clients");if(e.ok){let t=await e.json();D(t)}}catch(e){console.error("Failed to fetch clients",e)}},ej=async()=>{try{let e=await fetch("/api/projects/".concat(s,"/files"));if(e.ok){let t=await e.json();F(t)}}catch(e){console.error("Failed to fetch files",e)}},ep=async()=>{try{let e=await fetch("/api/projects/".concat(s,"/notes"));if(e.ok){let t=await e.json();Z(t)}}catch(e){console.error("Failed to fetch notes",e)}},ef=async()=>{try{let e=await fetch("/api/projects/".concat(s,"/team"));if(e.ok){let t=await e.json();V(t)}}catch(e){console.error("Failed to fetch team members",e)}},ev=async e=>{e.preventDefault();try{(await fetch("/api/projects/".concat(s),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:R,description:H,clientId:"none"===J?null:J?parseInt(J):null,status:Y,startDate:X,endDate:ee})})).ok&&(eh(),q(!1))}catch(e){console.error("Failed to update project",e)}},eg=async()=>{try{(await fetch("/api/projects/".concat(s),{method:"DELETE"})).ok&&t.push("/dashboard/projects")}catch(e){console.error("Failed to delete project",e)}},ey=()=>{er.trim()&&ec&&(ec.send(JSON.stringify({content:er})),el(""))};return A?(0,a.jsx)("div",{className:"flex items-center justify-center h-96",children:"Loading..."}):m?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(C,{project:m,onEdit:()=>{var e;m&&(B(m.name),K(m.description),W((null===(e=m.clientId)||void 0===e?void 0:e.toString())||"none"),$(m.status),G(m.startDate),et(m.endDate),q(!0))},onDelete:()=>ea(!0)}),(0,a.jsxs)(r.mQ,{value:O,onValueChange:Q,children:[(0,a.jsxs)(r.dr,{children:[(0,a.jsx)(r.SP,{value:"overview",children:"Overview"}),(0,a.jsx)(r.SP,{value:"tasks",children:"Tasks"}),(0,a.jsx)(r.SP,{value:"team",children:"Team"}),(0,a.jsx)(r.SP,{value:"files",children:"Files"}),(0,a.jsx)(r.SP,{value:"notes",children:"Notes"}),(0,a.jsxs)(r.SP,{value:"chat",children:[(0,a.jsx)(j,{className:"h-4 w-4 mr-2"}),"Chat"]})]}),(0,a.jsx)(r.nU,{value:"overview",className:"space-y-4",children:(0,a.jsx)(S,{project:m,clientName:(()=>{if(!(null==m?void 0:m.clientId))return"No client";let e=k.find(e=>e.id===m.clientId);return e?"".concat(e.name," (").concat(e.company,")"):"Unknown client"})()})}),(0,a.jsx)(r.nU,{value:"tasks",children:(0,a.jsx)(P,{tasks:y,people:b,projectId:m.id,onTasksChange:eu})}),(0,a.jsx)(r.nU,{value:"team",children:(0,a.jsx)(E,{teamMembers:I,people:b,projectId:m.id,onTeamChange:ef})}),(0,a.jsx)(r.nU,{value:"files",children:(0,a.jsx)(M,{files:z,projectId:m.id,onFilesChange:ej})}),(0,a.jsx)(r.nU,{value:"notes",children:(0,a.jsx)(T,{notes:_,projectId:m.id,onNotesChange:ep})}),(0,a.jsx)(r.nU,{value:"chat",children:(0,a.jsx)(l.Zb,{children:(0,a.jsx)(l.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-col h-[500px]",children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[0===en.length?(0,a.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No messages yet"}):en.map(e=>{var t;return(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(x.qE,{className:"h-8 w-8",children:(0,a.jsx)(x.Q5,{children:(null===(t=e.senderName)||void 0===t?void 0:t.charAt(0))||"U"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-sm",children:e.senderName||"Unknown"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleTimeString()})]}),(0,a.jsx)("p",{className:"text-sm mt-1",children:e.content})]})]},e.id)}),(0,a.jsx)("div",{ref:ed})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.I,{placeholder:"Type a message...",value:er,onChange:e=>el(e.target.value),onKeyPress:e=>"Enter"===e.key&&ey()}),(0,a.jsx)(o.z,{onClick:ey,children:(0,a.jsx)(p,{className:"h-4 w-4"})})]})]})})})})]}),(0,a.jsx)(f.Vq,{open:L,onOpenChange:q,children:(0,a.jsxs)(f.cZ,{className:"max-w-2xl",children:[(0,a.jsxs)(f.fK,{children:[(0,a.jsx)(f.$N,{children:"Edit Project"}),(0,a.jsx)(f.Be,{children:"Update project information"})]}),(0,a.jsxs)("form",{onSubmit:ev,children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"name",children:"Project Name *"}),(0,a.jsx)(c.I,{id:"name",value:R,onChange:e=>B(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"description",children:"Description"}),(0,a.jsx)(h.g,{id:"description",value:H,onChange:e=>K(e.target.value),rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"client",children:"Client"}),(0,a.jsxs)(u.Ph,{value:J,onValueChange:W,children:[(0,a.jsx)(u.i4,{children:(0,a.jsx)(u.ki,{placeholder:"Select a client"})}),(0,a.jsxs)(u.Bw,{children:[(0,a.jsx)(u.Ql,{value:"none",children:"No Client"}),k.map(e=>(0,a.jsxs)(u.Ql,{value:e.id.toString(),children:[e.name," ",e.company&&"(".concat(e.company,")")]},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"status",children:"Status"}),(0,a.jsxs)(u.Ph,{value:Y,onValueChange:$,children:[(0,a.jsx)(u.i4,{children:(0,a.jsx)(u.ki,{})}),(0,a.jsxs)(u.Bw,{children:[(0,a.jsx)(u.Ql,{value:"active",children:"Active"}),(0,a.jsx)(u.Ql,{value:"completed",children:"Completed"}),(0,a.jsx)(u.Ql,{value:"on-hold",children:"On Hold"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"startDate",children:"Start Date"}),(0,a.jsx)(c.I,{id:"startDate",type:"date",value:X,onChange:e=>G(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"endDate",children:"End Date"}),(0,a.jsx)(c.I,{id:"endDate",type:"date",value:ee,onChange:e=>et(e.target.value)})]})]})]}),(0,a.jsxs)(f.cN,{className:"mt-6",children:[(0,a.jsx)(o.z,{type:"button",variant:"outline",onClick:()=>q(!1),children:"Cancel"}),(0,a.jsx)(o.z,{type:"submit",children:"Update Project"})]})]})]})}),(0,a.jsx)(v.Q,{open:es,onOpenChange:ea,onConfirm:eg,title:"Delete Project",description:'Are you sure you want to delete "'.concat(m.name,'"? This action cannot be undone and will delete all associated tasks, files, and notes.')})]}):(0,a.jsx)("div",{className:"flex items-center justify-center h-96",children:"Project not found"})}},3823:function(e,t,s){"use strict";s.d(t,{F$:function(){return l},Q5:function(){return c},qE:function(){return r}});var a=s(9533);s(1229);var n=s(4159),i=s(2284);function r(e){let{className:t,...s}=e;return(0,a.jsx)(n.fC,{"data-slot":"avatar",className:(0,i.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)(n.Ee,{"data-slot":"avatar-image",className:(0,i.cn)("aspect-square size-full",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)(n.NY,{"data-slot":"avatar-fallback",className:(0,i.cn)("bg-muted flex size-full items-center justify-center rounded-full",t),...s})}},3373:function(e,t,s){"use strict";s.d(t,{$F:function(){return c},AW:function(){return o},Ju:function(){return u},VD:function(){return x},Xi:function(){return d},bO:function(){return h},h_:function(){return l}});var a=s(9533);s(1229);var n=s(5455),i=s(438),r=s(2284);function l(e){let{...t}=e;return(0,a.jsx)(n.fC,{"data-slot":"dropdown-menu",...t})}function c(e){let{...t}=e;return(0,a.jsx)(n.xz,{"data-slot":"dropdown-menu-trigger",...t})}function o(e){let{className:t,sideOffset:s=4,...i}=e;return(0,a.jsx)(n.Uv,{children:(0,a.jsx)(n.VY,{"data-slot":"dropdown-menu-content",sideOffset:s,className:(0,r.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...i})})}function d(e){let{className:t,inset:s,variant:i="default",...l}=e;return(0,a.jsx)(n.ck,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":i,className:(0,r.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l})}function h(e){let{className:t,children:s,checked:l,...c}=e;return(0,a.jsxs)(n.oC,{"data-slot":"dropdown-menu-checkbox-item",className:(0,r.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),checked:l,...c,children:[(0,a.jsx)("span",{className:"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(i.Z,{className:"size-4"})})}),s]})}function u(e){let{className:t,inset:s,...i}=e;return(0,a.jsx)(n.__,{"data-slot":"dropdown-menu-label","data-inset":s,className:(0,r.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...i})}function x(e){let{className:t,...s}=e;return(0,a.jsx)(n.Z0,{"data-slot":"dropdown-menu-separator",className:(0,r.cn)("bg-border -mx-1 my-1 h-px",t),...s})}},5477:function(e,t,s){"use strict";s.d(t,{RM:function(){return l},SC:function(){return c},iA:function(){return i},pj:function(){return d},ss:function(){return o},xD:function(){return r}});var a=s(9533);s(1229);var n=s(2284);function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,n.cn)("w-full caption-bottom text-sm",t),...s})})}function r(e){let{className:t,...s}=e;return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,n.cn)("[&_tr]:border-b",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,n.cn)("[&_tr:last-child]:border-0",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,n.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,n.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,n.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}},4259:function(e,t,s){"use strict";s.d(t,{SP:function(){return c},dr:function(){return l},mQ:function(){return r},nU:function(){return o}});var a=s(9533);s(1229);var n=s(7883),i=s(2284);function r(e){let{className:t,...s}=e;return(0,a.jsx)(n.fC,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)(n.aV,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)(n.xz,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)(n.VY,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",t),...s})}},8149:function(e,t,s){"use strict";s.d(t,{g:function(){return i}});var a=s(9533);s(1229);var n=s(2284);function i(e){let{className:t,...s}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,n.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}},7883:function(e,t,s){"use strict";s.d(t,{VY:function(){return T},aV:function(){return F},fC:function(){return z},xz:function(){return P}});var a=s(1229),n=s(4647),i=s(589),r=s(4301),l=s(2990),c=s(7938),o=s(8572),d=s(934),h=s(2956),u=s(9533),x="Tabs",[m,j]=(0,i.b)(x,[r.Pc]),p=(0,r.Pc)(),[f,v]=m(x),g=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,onValueChange:n,defaultValue:i,orientation:r="horizontal",dir:l,activationMode:m="automatic",...j}=e,p=(0,o.gm)(l),[v,g]=(0,d.T)({prop:a,onChange:n,defaultProp:null!=i?i:"",caller:x});return(0,u.jsx)(f,{scope:s,baseId:(0,h.M)(),value:v,onValueChange:g,orientation:r,dir:p,activationMode:m,children:(0,u.jsx)(c.WV.div,{dir:p,"data-orientation":r,...j,ref:t})})});g.displayName=x;var y="TabsList",N=a.forwardRef((e,t)=>{let{__scopeTabs:s,loop:a=!0,...n}=e,i=v(y,s),l=p(s);return(0,u.jsx)(r.fC,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:a,children:(0,u.jsx)(c.WV.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:t})})});N.displayName=y;var b="TabsTrigger",w=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,disabled:i=!1,...l}=e,o=v(b,s),d=p(s),h=S(o.baseId,a),x=D(o.baseId,a),m=a===o.value;return(0,u.jsx)(r.ck,{asChild:!0,...d,focusable:!i,active:m,children:(0,u.jsx)(c.WV.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":x,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:h,...l,ref:t,onMouseDown:(0,n.Mj)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(a)}),onKeyDown:(0,n.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(a)}),onFocus:(0,n.Mj)(e.onFocus,()=>{let e="manual"!==o.activationMode;m||i||!e||o.onValueChange(a)})})})});w.displayName=b;var k="TabsContent",C=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:n,forceMount:i,children:r,...o}=e,d=v(k,s),h=S(d.baseId,n),x=D(d.baseId,n),m=n===d.value,j=a.useRef(m);return a.useEffect(()=>{let e=requestAnimationFrame(()=>j.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,u.jsx)(l.z,{present:i||m,children:s=>{let{present:a}=s;return(0,u.jsx)(c.WV.div,{"data-state":m?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":h,hidden:!a,id:x,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:j.current?"0s":void 0},children:a&&r})}})});function S(e,t){return"".concat(e,"-trigger-").concat(t)}function D(e,t){return"".concat(e,"-content-").concat(t)}C.displayName=k;var z=g,F=N,P=w,T=C}},function(e){e.O(0,[890,396,656,49,455,904,389,170,842,744],function(){return e(e.s=6724)}),_N_E=e.O()}]);